<div class="card mb-12"></div>
<div class="card-header">
  <p>
    <b>New Membership</b> &nbsp;
    <ng-template #content let-modal>
      <div class="modal-header">
        <h4 class="modal-title" id="modal-basic-title">
          <b>New Membership type</b>
        </h4>
        
        <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form [formGroup]="membershipGroup" (ngSubmit)="onSubmit()">
          <div class="alert alert-warning" role="alert" *ngIf="f.amount.value < 1500">
           Amount is less than Rs :1500.00
          </div>
          <div class="form-group">
            <div class="group-gap">
              <div class="form-row">
                <div class="form-group col-md-6">
                  <label for="inputquantity4">Membership type Id</label>
                  <input type="text" class="form-control" formControlName="membership_type_id" disabled />
                </div>
                <div class="form-group col-md-6">
                  <label for="inputPassword4">Membership Name</label>
                  <input type="text" class="form-control" id="inlineFormInputGroup" placeholder="Type Name"
                    formControlName="typeName" [ngClass]="{
                                            'is-invalid':
                                                submitted && f.typeName.errors
                                        }" />
                  <div *ngIf="submitted && f.typeName.errors" class="invalid-feedback">
                    <div *ngIf="f.typeName.errors.required">
                      Type Name is required
                    </div>
                  </div>
                </div>

                <div class="form-group col-md-6">
                  <label for="inputPassword4">Member Catagory</label>
                  <select class="form-control" formControlName="membershipCatagory" [ngClass]="{
                                            'is-invalid':
                                                submitted &&
                                                f.membershipCatagory.errors
                                        }">
                                        <option selected>Choose...</option>
                    <option [value]="getMemberCat" *ngFor="let data of states" >{{
                                            data
                                        }}</option>
                  </select>
                  <div *ngIf="
                                            submitted &&
                                            f.membershipCatagory.errors
                                        " class="invalid-feedback">
                    <div *ngIf="
                                                f.membershipCatagory.errors
                                                    .required
                                            ">
                      Membership Catagory is required
                    </div>
                  </div>
                </div>

                <div class="form-group col-md-6">
                  <label for="inputPassword4">Amount</label>
                  <div class="input-group mb-2">
                    <div class="input-group-prepend">
                      <div class="input-group-text">
                        <b>Rs:</b>
                      </div>
                    </div>
                    <input type="text" class="form-control" id="inlineFormInputGroup" placeholder="00.00"
                      formControlName="amount" [ngClass]="{
                                                'is-invalid':
                                                    (submitted && f.amount.errors) || f.amount.value==0
                                            }" />

                    <div *ngIf="submitted && f.amount.errors" class="invalid-feedback">
                      <div *ngIf="f.amount.errors.required">
                        Amount Price is required
                      </div>
                    </div>
                    <div *ngIf="submitted && !f.amount.errors" class="invalid-feedback">
                      <div *ngIf="f.amount.value==0">
                        Amount Price can't be 0
                      </div>
                    </div>
                  </div>
                  <!-- <div class="alert alert-danger" role="alert" *ngIf="this.f.amount.value==0">
                   Amount cannot be 0
                  </div> -->
                </div>
              </div>
              <div class="form-row">
                <div class="form-group col-md-6">
                  <label for="inputPassword4">Period Type</label>
                  <select class="form-control" formControlName="periodType" [ngClass]="{
                                            'is-invalid':
                                                submitted && f.periodType.errors
                                        }"  (change) = "onChangeCategory($event)"  >
                                        <option selected>Choose...</option>
                                        <option *ngFor="let data of periodType">{{data}} </option>
                 
                  </select>
                  <div *ngIf="submitted && f.periodType.errors" class="invalid-feedback">
                    <div *ngIf="f.periodType.errors.required">
                      Period Type is required
                    </div>
                  </div>
                </div>
                <!-- Month -->
                <div class="form-group col-md-6" *ngIf="monthToMonth">
                  <label for="inputPassword4">Month</label>
                  <select class="form-control" formControlName="YMDValue" [ngClass]="{
                                            'is-invalid':
                                                submitted && f.YMDValue.errors
                                        }">
                   
                    <option *ngFor="let data of mounthArray">{{ data }}</option>
                  </select>
                  <div *ngIf="submitted && f.YMDValue.errors" class="invalid-feedback">
                    <div *ngIf="f.YMDValue.errors.required">
                      Mounth is required
                    </div>
                  </div>
                </div>
<!-- Years -->
<div class="form-group col-md-6" *ngIf="yearToyear">
  <label for="inputPassword4">Year</label>
  <select class="form-control" formControlName="YMDValue" [ngClass]="{
                            'is-invalid':
                                submitted && f.YMDValue.errors
                        }">
   
    <option *ngFor="let data of mounthArray">{{ data }}</option>
  </select>
  <div *ngIf="submitted && f.YMDValue.errors" class="invalid-feedback">
    <div *ngIf="f.YMDValue.errors.required">
      Year is required
    </div>
  </div>
</div>

<!-- Days -->

<div class="form-group col-md-6" *ngIf="dayToDay">
  <label for="inputPassword4">Days</label>
  <select class="form-control" formControlName="YMDValue" [ngClass]="{
                            'is-invalid':
                                submitted && f.YMDValue.errors
                        }"    (change) = "identifyWeeks($event)">
   
    <option *ngFor="let data of dayArrays">{{ data }}</option>
  </select>
  <div *ngIf="submitted && f.YMDValue.errors" class="invalid-feedback">
    <div *ngIf="f.YMDValue.errors.required">
      Days is required
    </div>
  </div>
</div>
              </div>
              <div class="form-row">
                <!-- 1st weeek -->
                <p class="alert alert-warning" *ngIf ="Week1">
                    This Membership is valid for a week only
              </p>

              <!-- 2 weeks -->
              <p class="alert alert-warning" *ngIf= "Week2">
              This Membership is valid for a <b>Two</b> weeks only
            </p>


              </div>  
              <div class="form-row">
                <div class="form-group col-md-12">
                  <label for="exampleForsubControlTextarea1">Note</label>
                  <textarea class="form-control" placeholder="Note" formControlName="note" rows="3"></textarea>
                </div>
              </div>

              <div class="form-row">
                <div class="form-group col-md-6"></div>
              </div>
              <!-- 2nd Row -->

              <div class="form-row"></div>
            </div>
          </div>

          <button type="submit" class="btn btn-primary">
            Submit<i class="fa fa-book" aria-hidden="true"></i>
          </button>
        </form>
      </div>
    </ng-template>
    <button type="button" class="btn btn-primary btn-sm" (click)="open(content)">
      <b>New</b>
    </button>

    <!-- TableDetails -->
  </p>
</div>

<div class="card-body table-responsive">
  <table class="table table-hover table-striped">
    <thead>
      <div class="row">
        <div class="container">
          <div class="row">
            <div class="col-md-7">
              <h2>
                <b>All Membership Type Status</b>
              </h2>
            </div>
          </div>

          <hr />
          <!-- <p>Your role is: <strong>{{currentUser.role}}</strong>.</p> -->
          <br />

          <table #dataTable class="table table-striped table-hover table-bordered table-sm" id="mytable">
            <caption>
              <b>View Membership Details</b>
            </caption>
            <thead>
              <tr>
                <th style="text-align: center;" scope="col">
                  Membership type ID
                </th>
                <th style="text-align: center;" scope="col">
                  Type Name
                </th>
                <th style="text-align: center;" scope="col">
                  Category
                </th>
                <th style="text-align: center;" scope="col">
                  Perion type
                </th>
                <th style="text-align: center;" scope="col">
                  Valid untill
                </th>
                <th style="text-align: center;" scope="col">
                  Amount <b>(Rs:)</b>
                </th>
                <th style="text-align: center;" scope="col">
                  Action
                </th>
              </tr>
            </thead>
            <tbody>
              <!-- | paginate: { itemsPerPage: 10, currentPage: p } -->

              <tr *ngFor="let data of values">
                <td style="text-align: center;">
                  {{ data.membership_type_id }}
                </td>
                <td style="text-align: center;">
                  {{ data.membershipName }}
                </td>
                <td style="text-align: center;">
                  {{ data.membershipCatagory }}
                </td>
                <td style="text-align: center;">
                  {{ data.periodType }}
                </td>
                <td style="text-align: center;">
                  <b>{{ data.YMDValue }}</b>
                </td>
                <td style="text-align: center;">
                  {{ data.amount }}
                </td>
                <td style="text-align: center;">
                  <button type="button" class="btn btn-primary btn-sm"(click)="onClickEditPopUp(data ,content)" ><i
                    class="fa fa-pencil" aria-hidden="true" ngbTooltip="Edit"></i></button> &nbsp;
                <button type="button" class="btn btn-danger btn-sm"><i class="fa fa-trash-o" (click)="onClickDeleteRow(data)"
                    aria-hidden="true" ngbTooltip="Edit"  ngbTooltip="delete"></i></button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </thead>
  </table>
</div>